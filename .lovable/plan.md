
# План: Создание первого администратора

## Текущая ситуация
- База данных пуста после ремикса проекта
- Нет ни одного пользователя в системе
- Edge function для создания пользователей требует авторизации админа
- Получается "замкнутый круг" — нужен админ, чтобы создать админа

## Решение
Создать первого администратора напрямую через SQL-миграцию в базе данных.

---

## Этапы реализации

### Этап 1: Создание пользователя через Auth Admin API
Использую миграцию базы данных для создания:
1. Пользователя в `auth.users` с подтвержденным email
2. Профиля в таблице `profiles`
3. Роли `admin` в таблице `user_roles`

### Этап 2: Данные для входа
После выполнения миграции предоставлю вам:
- **Логин:** `admin`
- **Пароль:** (безопасный, сгенерированный)

### Этап 3: Альтернативный подход
Если SQL миграция не сработает для auth.users, создам пользователя через Supabase Auth Admin API в edge function без проверки авторизации (временно).

---

## Технические детали

Система использует username-based аутентификацию:
- Username конвертируется в internal email: `username@app.internal`
- Пароль хешируется через Supabase Auth
- Роли хранятся в таблице `user_roles`

### SQL для создания админа
```sql
-- Создаем пользователя в auth.users
-- Создаем профиль в profiles
-- Назначаем роль admin в user_roles
```

---

## Ожидаемый результат
После одобрения плана:
1. Создам администратора в базе данных
2. Предоставлю логин и пароль
3. Вы сможете войти через `/login` или `/admin-login`
4. После входа сможете создавать других пользователей через админ-панель
