# FeedbackStars Component

## –û–ø–∏—Å–∞–Ω–∏–µ

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å–±–æ—Ä–∞ –æ—Ç–∑—ã–≤–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–± AI –∞–Ω–∞–ª–∏–∑–µ –¥–µ–ª. –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –ø–æ —à–∫–∞–ª–µ –æ—Ç 1 –¥–æ 5 –∑–≤–µ–∑–¥ —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–≤—ã–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚≠ê –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ 1-5 –∑–≤–µ–∑–¥
- üí¨ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- üé® –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å shadcn/ui
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è "–£–∂–µ –æ—Ü–µ–Ω–µ–Ω–æ"
- üá¶üá≤ –í—Å–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞ –≤–æ—Å—Ç–æ—á–Ω–æ-–∞—Ä–º—è–Ω—Å–∫–æ–º —è–∑—ã–∫–µ
- üîî Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```tsx
import { FeedbackStars } from '@/components/FeedbackStars';

function YourComponent() {
  return (
    <FeedbackStars 
      caseId="case-uuid" 
      analysisId="analysis-uuid" // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    />
  );
}
```

## Props

| Prop | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|--------------|----------|
| `caseId` | `string` | –î–∞ | ID –¥–µ–ª–∞ |
| `analysisId` | `string` | –ù–µ—Ç | ID –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ |
| `className` | `string` | –ù–µ—Ç | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ CSS –∫–ª–∞—Å—Å—ã |

## –°–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### 1. –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â–µ –Ω–µ –æ—Å—Ç–∞–≤–∏–ª –æ—Ç–∑—ã–≤:
- 5 –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–≤–µ–∑–¥
- –ü—É—Å—Ç–æ–µ –ø–æ–ª–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞ –¥–æ –≤—ã–±–æ—Ä–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞

### 2. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
–ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∑–≤–µ–∑–¥:
- –ó–≤–µ–∑–¥—ã –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç—Å—è –∂–µ–ª—Ç—ã–º
- –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

### 3. –£–∂–µ –æ—Ü–µ–Ω–µ–Ω–æ
–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –æ—Å—Ç–∞–≤–∏–ª –æ—Ç–∑—ã–≤:
- –ó–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω –∫–∞—Ä—Ç–æ—á–∫–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (–µ—Å–ª–∏ –±—ã–ª)
- –§–æ—Ä–º–∞ —Å–∫—Ä—ã—Ç–∞

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–∞–±–ª–∏—Ü–µ–π `user_feedback`:

```sql
CREATE TABLE user_feedback (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  case_id UUID REFERENCES cases(id),
  analysis_id UUID REFERENCES ai_analysis(id),
  user_id UUID,
  rating INTEGER CHECK (rating >= 1 AND rating <= 5),
  comment TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);
```

## –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

–í—Å–µ —Ç–µ–∫—Å—Ç—ã –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã –Ω–∞ –∞—Ä–º—è–Ω—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–∞—Ö —á–µ—Ä–µ–∑ i18next.

### –ö–ª—é—á–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (ai namespace)

```json
{
  "rate_analysis_title": "‘≥’∂’°’∞’°’ø’•’¨ ’æ’•÷Ä’¨’∏÷Ç’Æ’∏÷Ç’©’µ’∏÷Ç’∂’®",
  "rating_label": "’Å’•÷Ä ’£’∂’°’∞’°’ø’°’Ø’°’∂’®",
  "star": "’°’Ω’ø’≤",
  "stars": "’°’Ω’ø’≤",
  "comment_optional": "’Ñ’•’Ø’∂’°’¢’°’∂’∏÷Ç’©’µ’∏÷Ç’∂ (’®’Ω’ø ÷Å’°’∂’Ø’∏÷Ç’©’µ’°’∂)",
  "submit_feedback_button": "‘≥’∂’°’∞’°’ø’•’¨ ’æ’•÷Ä’¨’∏÷Ç’Æ’∏÷Ç’©’µ’∏÷Ç’∂’®",
  "feedback_already_submitted": "‘¥’∏÷Ç÷Ñ ’°÷Ä’§’•’∂ ’£’∂’°’∞’°’ø’•’¨ ’•÷Ñ ’°’µ’Ω ’æ’•÷Ä’¨’∏÷Ç’Æ’∏÷Ç’©’µ’∏÷Ç’∂’®",
  "feedback_submit_success": "’á’∂’∏÷Ä’∞’°’Ø’°’¨’∏÷Ç’©’µ’∏÷Ç’∂ ’±’•÷Ä ’£’∂’°’∞’°’ø’°’Ø’°’∂’´ ’∞’°’¥’°÷Ä",
  "feedback_submit_failed": "’â’∞’°’ª’∏’≤’æ’•÷Å ’∏÷Ç’≤’°÷Ä’Ø’•’¨ ’£’∂’°’∞’°’ø’°’Ø’°’∂’®"
}
```

## –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–í `CaseDetail.tsx` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è AI –∞–Ω–∞–ª–∏–∑–∞:

```tsx
{Object.values(results).some(r => r !== null) && (
  <div className="mt-6 pt-6 border-t">
    <FeedbackStars caseId={caseData.id} />
  </div>
)}
```

## –•—É–∫ useFeedback

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö—É–∫ `useFeedback` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏:

```tsx
const { 
  existingFeedback,  // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ—Ç–∑—ã–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  isLoading,         // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  isSubmitting,      // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
  submitFeedback     // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏
} = useFeedback(caseId);
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞ (1-5)
- Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞

## –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
- shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Card, Button, Textarea, Label)
- Tailwind CSS –¥–ª—è —Å—Ç–∏–ª–µ–π
- Lucide React –¥–ª—è –∏–∫–æ–Ω–æ–∫ (Star)
- cn() —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —É—Å–ª–æ–≤–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤
